# 07 数学运算
## 数学表达式
1. bash支持一些整数运算。可以通过扩展bc等工具可以支持浮点计算等特性。
2. bash中的数学计算兼容Bourne shell的expr命令标记。但是那种写法太过复杂，这里介绍比较简洁的写法。
3. 将要求值的表达式放到方括号中并且前边加美元符号，例如：`$[$var1 + $var2]`。整个表达式可以当做一个只读变量使用。
4. 如果需要使用常数，直接输入常数即可：`$[$var1 + 12]`。
## 数学和逻辑运算
1. bash支持的数学运算有：
    * `+$var1` 原样返回
    * `-$var1` 取反运算
    * `$var1 + $var2` 加法
    * `$var1 - $var2` 减法
    * `$var1 * $var2` 乘法
    * `$var1 / $var2` 返回带余除法的商
    * `$var1 % $var2` 返回带余除法的余数 
2. bash也可以进行逻辑运算。进行逻辑运算的时候0或者null表示假，非零值表示真。
3. bash支持的逻辑运算类型：
    * `! $var1` 非
    * `$var1 | $var2` 或
    * `$var1 & $var2` 与
4. 比较运算，通过判断表达式中关系是否成立，返回真假值：
    * `$var1 < $var2` 小于
    * `$var1 <= $var2` 小于等于
    * `$var1 > $var2` 大于
    * `$var1 >= $var2` 大于等于
    * `$var1 == $var2` 等于
    * `$var1 != $var2` 不等于   
5. 在数学表达式中也可用圆括号调整运算顺序。
6. 更多的数学和逻辑运算类型在此不一一列举。 详见`info bash`。
## 返回状态
1. 在脚本中使用exit命令退出脚本。
2. exit后接数字表示回传结束状态（相当于程序返回值）。
3. 在bash中变量`?`表示上一个执行结束的返回值。查看上一个结束的命令的返回值用`echo $?`。
4. 和数学表达式运算恰恰相反，退出状态码用0表示成功执行，用非零值表示不成功执行。为了方便记忆和防止混淆bash提供了true和false两个命令。只要记住成功执行返回值同true就可以了。（不成功执行返回值不一定等于false，因为不成功种类不同返回值也不同。）
5. 尽量不要混淆返回状态和数据运算。返回状态一般不会通过输出流返回，因此不能用以前捕获输出流的方式把返回状态赋值给变量。
6. 返回状态的一大用途就是用于条件语句执行条件的判断。bash中的条件语句并不判断一个变量的值，而是执行一条指令并判断其返回状态。因此条件语句中用到的条件之间的与或非运算和数学表达式中的与或非运算是相互独立的两套机制。这个下一期将会详细介绍。

# 06 输入输出流
## 输入输出流
1. echo等命令是把字符串输出到了标准输出流。而默认情况下字符终端就是标准输出流。
2. Linux系统中一切都是文件，所以标准输入输出流其实就是几个特殊的文件。Linux系统把它们映射到设备上或者其他文件上，这样对标准输入输出流文件做修改，就相当于向某个设备或者文件传递信息。
3. Linux有3个表内准输入输出文件，分别用0、1、2三个文件描述符表示。0表示STDIN，标准输入；1表示STDOUT，标准输出；2表示STDERR，标准错误输出。标准错误输出也是一个输出流，只不过专门用来输出错误信息，这样可以防止业务数据和调试数据混在一起。
4. 交互式shell的命令提示符走标准错误输出。
## 重定向
1. 对于使用了输入输出流的程序，我们可以通过重定向，来改变其读写数据的位置。
2. `ls > lsRecord` 把ls的结果保存成文件lsRecord，而不是输出到显示器上。有意思的是这个文件本身也名列其中。显然是先创建了文件，然后运行ls并把输入流导入。
3. `echo 'Goodbye World.' >> lsRecord` 用一个大于号，则每次输出到文件都会覆盖原有内容。而使用两个大于号表示在文件结尾追加内容。
4. `less < lsRecord` less命令也可以这样用。这是把文件lsRecord作为less命令的输入流。
5. 可以同时重定向输入流和输出流。例子中的grep是文本过滤工具。参数“zip”，表示从输入流中筛选带“zip”的项目并输出到输出流。第二条命令就表示grep从binls文件读取，找出带“zip”的项目，然后输出到grepResult文件。
        >```
        >ls /bin > binls
        >grep zip < binls >grepResult
        >```
6. 默认的输出重定向只重定向标准输出。如果要指定错误输出重定向，则使用`2>`。如果同时重定向两个输出流，则标准输出使用`1>`。如果要指明标准输入重定向可以用`0<`。例如`ls /bin /dev /windows 2> errors 1> lsResult`。
7. 流本身也是文件，因此可以把标准输出重定向到标准错误输出，反之亦然。echo是向标准输出流输出。如果需要在脚本输出到标准错误流，则使用`>&2`把标准输出流的内容用标准错误输出流输出。反之则用`>&1`。（这里问文件述符前面加`&`的原因和变量前加`$`类似。）
8. `ls /windows 1>lsout 2>&1`中是把表准输出重定向到lsout文件，然后把标准错误输出重定向到标准输出。标准错误输出经由标准输出输出到lsout。注意顺序乱了结果就会不一样。一般用法是要输出到标准输出就不重定向，需要输出到标准错误输出再跟上`>&2`临时重定向到标准错误输出。
9. 在脚本中如果要永久改变重定向（直到脚本结束或者下一条永久重定向命令），就使用exec。
    * `exec 0< myFile` 此命令以后标准输入重定向到myFile。 
    * `exec 1> outFile` 此命令后标准出重定向到outFile。
    * `exec 2> err` 此命令后标准错误输出重定向到err。
## 自定义输入输出流
1. 标准输入输出只用了3个数字作为文件描述符。剩余的7个数字符号都可以作为输入输出流文件描述符，只不过需要先定向后再使用。
2. 示例：
    >```
    >exec 3>myFile3
    >echo >&3t
    >```
    输入也可以重定向
    >```
    >exec 4<myFile3
    >less 0<&4
    >```
3. 关闭流。例如关闭3号流:`exec 3>&-`。
## 特殊文件
1. 如果你不希望输出流输出到屏幕或任何文件中，就把它重定向到/dev/null。任何定向到这里的数据都会被丢弃。一种常见的用法是屏蔽错误信息`exec 2> /dev/null`。
2. 如果把/dev/null作为输入流定向给交互式shell，shell会退出。
3. 一般临时文件会创建于/tmp目录。任何用户都有权限在其中读写。但是这个目录中的内容会定期清理。
## 管道
1. 使用符号`|`链接命令，会将前一个命令的输出作为后一个命令的输入。这种功能称为管道。例如`ls /bin | less`。
2. 可以多个命令连用`ls /bin | grep zip | less`。
